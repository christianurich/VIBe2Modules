from pyvibe import *


class ConvertCorine(Module):        

    def __init__(self):
        Module.__init__(self)
        self.rIn = RasterDataIn()
        self.rOut = RasterDataIn()
        self.Width = 400
        self.Height = 250
        self.CellSize = 20
            
        self.addParameter(self, "Height", VIBe2.LONG)
        self.addParameter(self, "Width", VIBe2.LONG)
        self.addParameter(self, "CellSize", VIBe2.DOUBLE)
        self.addParameter(self, "rIn", VIBe2.RASTERDATA_IN)
        self.addParameter(self, "rOut", VIBe2.RASTERDATA_OUT)
            
  

   
    def run(self):
        print "Run RasterDataAddition"
        ress = self.rOut.getItem()
        ress.setSize(self.Width, self.Height, self.CellSize)
        rdata = self.rIn.getItem()
        
        for x in range(self.Width):            
            for y in range(self.Height):   
                val = rdata.getValue(x,y)
                ress.setValue(x,y,val)  
                if val == 313 or val== 321 or val== 311: 
                    ress.setValue(x,y,6)
                if val == 312: 
                    ress.setValue(x,y,6)
                if val == 231 or val ==242 or val == 211: 
                    ress.setValue(x,y,5)
                if val == 111 : 
                    ress.setValue(x,y,2)     
                if val == 112 or val == 124 or val == 122: 
                    ress.setValue(x,y,3)      
                if val == 511: 
                    ress.setValue(x,y,7)                        

 



